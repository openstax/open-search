---
http_interactions:
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: "{}"
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.ListTables
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195620Z
      X-Amz-Content-Sha256:
      - 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '2'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:21 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '17'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - IUEFJ5J9KC2BALFLG8P39C0GINVV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '1315925753'
    body:
      encoding: UTF-8
      string: '{"TableNames":[]}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:21 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: "{}"
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.ListTables
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195621Z
      X-Amz-Content-Sha256:
      - 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '2'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:21 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '17'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - E85571VCAE8DGP1971OQ7KMUBJVV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '1315925753'
    body:
      encoding: UTF-8
      string: '{"TableNames":[]}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:21 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: '{"TableName":"test_indexing","ProvisionedThroughput":{"ReadCapacityUnits":100,"WriteCapacityUnits":20},"KeySchema":[{"AttributeName":"id","KeyType":"HASH"}],"AttributeDefinitions":[{"AttributeName":"id","AttributeType":"S"}]}'
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.CreateTable
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195621Z
      X-Amz-Content-Sha256:
      - cc4741e1cc8068b421b49b3285c5618157ea09ca79bd6a55cfa53c16bf3886c2
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '225'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:21 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '491'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 10APCH3K4N61FTQER50774BOCNVV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '502317647'
    body:
      encoding: UTF-8
      string: '{"TableDescription":{"AttributeDefinitions":[{"AttributeName":"id","AttributeType":"S"}],"CreationDateTime":1.556740581877E9,"ItemCount":0,"KeySchema":[{"AttributeName":"id","KeyType":"HASH"}],"ProvisionedThroughput":{"NumberOfDecreasesToday":0,"ReadCapacityUnits":100,"WriteCapacityUnits":20},"TableArn":"arn:aws:dynamodb:us-east-2:AWS_ACCOUNT_ID:table/test_indexing","TableId":"563e2d6f-27e7-4fcd-8e66-6784daaa6855","TableName":"test_indexing","TableSizeBytes":0,"TableStatus":"CREATING"}}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:21 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: '{"TableName":"test_indexing"}'
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.DescribeTable
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195623Z
      X-Amz-Content-Sha256:
      - b769faf39a6d0d44a0e395242dec7e6988e15b38ec5ad2735c8e20b1cb6c56c3
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '29'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:24 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '480'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - TNA6RO9DLG2J79OOUBG9REPNCNVV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '2688354377'
    body:
      encoding: UTF-8
      string: '{"Table":{"AttributeDefinitions":[{"AttributeName":"id","AttributeType":"S"}],"CreationDateTime":1.556740581877E9,"ItemCount":0,"KeySchema":[{"AttributeName":"id","KeyType":"HASH"}],"ProvisionedThroughput":{"NumberOfDecreasesToday":0,"ReadCapacityUnits":100,"WriteCapacityUnits":20},"TableArn":"arn:aws:dynamodb:us-east-2:AWS_ACCOUNT_ID:table/test_indexing","TableId":"563e2d6f-27e7-4fcd-8e66-6784daaa6855","TableName":"test_indexing","TableSizeBytes":0,"TableStatus":"CREATING"}}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:24 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: '{"TableName":"test_indexing"}'
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.DescribeTable
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195626Z
      X-Amz-Content-Sha256:
      - b769faf39a6d0d44a0e395242dec7e6988e15b38ec5ad2735c8e20b1cb6c56c3
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '29'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:27 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '480'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - NFO09HEPP11RJQPOALQEU1N2IVVV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '2688354377'
    body:
      encoding: UTF-8
      string: '{"Table":{"AttributeDefinitions":[{"AttributeName":"id","AttributeType":"S"}],"CreationDateTime":1.556740581877E9,"ItemCount":0,"KeySchema":[{"AttributeName":"id","KeyType":"HASH"}],"ProvisionedThroughput":{"NumberOfDecreasesToday":0,"ReadCapacityUnits":100,"WriteCapacityUnits":20},"TableArn":"arn:aws:dynamodb:us-east-2:AWS_ACCOUNT_ID:table/test_indexing","TableId":"563e2d6f-27e7-4fcd-8e66-6784daaa6855","TableName":"test_indexing","TableSizeBytes":0,"TableStatus":"CREATING"}}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:27 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: '{"TableName":"test_indexing"}'
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.DescribeTable
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195629Z
      X-Amz-Content-Sha256:
      - b769faf39a6d0d44a0e395242dec7e6988e15b38ec5ad2735c8e20b1cb6c56c3
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '29'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:29 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '478'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - V9DMA24BPRNKVS0LID8A5FOBO3VV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '1263685469'
    body:
      encoding: UTF-8
      string: '{"Table":{"AttributeDefinitions":[{"AttributeName":"id","AttributeType":"S"}],"CreationDateTime":1.556740581877E9,"ItemCount":0,"KeySchema":[{"AttributeName":"id","KeyType":"HASH"}],"ProvisionedThroughput":{"NumberOfDecreasesToday":0,"ReadCapacityUnits":100,"WriteCapacityUnits":20},"TableArn":"arn:aws:dynamodb:us-east-2:AWS_ACCOUNT_ID:table/test_indexing","TableId":"563e2d6f-27e7-4fcd-8e66-6784daaa6855","TableName":"test_indexing","TableSizeBytes":0,"TableStatus":"ACTIVE"}}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:30 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: "{}"
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.ListTables
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195630Z
      X-Amz-Content-Sha256:
      - 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '2'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:30 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '32'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 0OOGSUIA6L4JLKK5C62DU5I3KJVV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '3848362501'
    body:
      encoding: UTF-8
      string: '{"TableNames":["test_indexing"]}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:30 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: '{"TableName":"test_indexing","Item":{"created_at":{"N":"1556740590.321419"},"updated_at":{"N":"1556740590.321752"},"id":{"S":"2843f3f0-3b1e-42c6-879a-d4b6cd656320"},"state":{"S":"pending"},"book_version_id":{"S":"14fb4ad7-39a1-4eee-ab6e-3ef2482e3e22@15.1"},"indexing_version":{"S":"I1"},"enqueued_time":{"S":"2019-05-01T19:56:30+00:00"}},"Expected":{"id":{"Exists":false}}}'
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.PutItem
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195630Z
      X-Amz-Content-Sha256:
      - 741c48ee14e894b80e85bc57b3231e9343efdaa7e9ae723dc16973df5a9b171e
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '373'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:30 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '2'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 4E01ECU3BREIAFUV4PKSTC2P63VV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '2745614147'
    body:
      encoding: UTF-8
      string: "{}"
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:30 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: '{"TableName":"test_indexing"}'
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.DescribeTable
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195630Z
      X-Amz-Content-Sha256:
      - b769faf39a6d0d44a0e395242dec7e6988e15b38ec5ad2735c8e20b1cb6c56c3
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '29'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:31 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '478'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - GR0LBLLHB3PQ18C7TL7QA4I0S7VV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '1263685469'
    body:
      encoding: UTF-8
      string: '{"Table":{"AttributeDefinitions":[{"AttributeName":"id","AttributeType":"S"}],"CreationDateTime":1.556740581877E9,"ItemCount":0,"KeySchema":[{"AttributeName":"id","KeyType":"HASH"}],"ProvisionedThroughput":{"NumberOfDecreasesToday":0,"ReadCapacityUnits":100,"WriteCapacityUnits":20},"TableArn":"arn:aws:dynamodb:us-east-2:AWS_ACCOUNT_ID:table/test_indexing","TableId":"563e2d6f-27e7-4fcd-8e66-6784daaa6855","TableName":"test_indexing","TableSizeBytes":0,"TableStatus":"ACTIVE"}}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:31 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: '{"Select":"COUNT","TableName":"test_indexing","ScanFilter":{"book_version_id":{"ComparisonOperator":"EQ","AttributeValueList":[{"S":"14fb4ad7-39a1-4eee-ab6e-3ef2482e3e22@15.1"}]}}}'
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.Scan
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195631Z
      X-Amz-Content-Sha256:
      - b84a3d8bdb90e1f0fe070e6d13574987a68176202ec991250b7c97c81f189140
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '180'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:31 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '28'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - BJKK2E4DSVL1J84PKP9HOD2B5BVV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '788233591'
    body:
      encoding: UTF-8
      string: '{"Count":1,"ScannedCount":1}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:31 GMT
- request:
    method: post
    uri: https://dynamodb.us-east-2.amazonaws.com/
    body:
      encoding: UTF-8
      string: '{"TableName":"test_indexing"}'
    headers:
      Content-Type:
      - application/x-amz-json-1.0
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby3/3.44.1 ruby/2.5.0 x86_64-darwin16 aws-sdk-dynamodb/1.21.0
      X-Amz-Target:
      - DynamoDB_20120810.DeleteTable
      Host:
      - dynamodb.us-east-2.amazonaws.com
      X-Amz-Date:
      - 20190501T195631Z
      X-Amz-Content-Sha256:
      - b769faf39a6d0d44a0e395242dec7e6988e15b38ec5ad2735c8e20b1cb6c56c3
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AWS_ACCESS_KEY_ID/20190501/us-east-2/dynamodb/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date;x-amz-target,
        Signature=<SignatureValue>
      Content-Length:
      - '29'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Server
      Date:
      - Wed, 01 May 2019 19:56:31 GMT
      Content-Type:
      - application/x-amz-json-1.0
      Content-Length:
      - '333'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 6GHO16PBTMO7S3760FD2KH19TVVV4KQNSO5AEMVJF66Q9ASUAAJG
      X-Amz-Crc32:
      - '648279775'
    body:
      encoding: UTF-8
      string: '{"TableDescription":{"ItemCount":0,"ProvisionedThroughput":{"NumberOfDecreasesToday":0,"ReadCapacityUnits":100,"WriteCapacityUnits":20},"TableArn":"arn:aws:dynamodb:us-east-2:AWS_ACCOUNT_ID:table/test_indexing","TableId":"563e2d6f-27e7-4fcd-8e66-6784daaa6855","TableName":"test_indexing","TableSizeBytes":0,"TableStatus":"DELETING"}}'
    http_version: 
  recorded_at: Wed, 01 May 2019 19:56:31 GMT
recorded_with: VCR 4.0.0
